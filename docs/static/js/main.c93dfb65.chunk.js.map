{"version":3,"sources":["Frame.jsx","App.jsx","index.jsx"],"names":["Frame","animate","_this","renderScene","frameId","window","requestAnimationFrame","_this2","this","script","document","createElement","src","async","onload","Ammo","then","lib","loadThree","body","appendChild","_this3","width","mount","clientWidth","height","clientHeight","modelUrl","concat","props","model","motionUrls","motions","map","m","clock","THREE","camera","position","z","scene","background","gridHelper","y","add","ambient","directionalLight","set","normalize","renderer","antialias","setClearColor","setSize","domElement","controls","OrbitControls","helper","MMDAnimationHelper","afterglow","loader","MMDLoader","loadWithAnimation","mesh","x","modelX","modelY","modelZ","animation","physics","ikHelper","objects","get","ikSolver","createHelper","visible","physicsHelper","start","stop","removeChild","cancelAnimationFrame","update","getDelta","render","_this4","react_default","a","style","padding","margin","ref","React","Component","App","src_Frame","params","URLSearchParams","location","search","ReactDOM","src_App","getElementById"],"mappings":"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","file":"static/js/main.c93dfb65.chunk.js","sourcesContent":["import React from 'react';\nimport * as THREE from 'three';\nimport { MMDLoader } from 'three/examples/jsm/loaders/MMDLoader';\nimport { MMDAnimationHelper } from 'three/examples/jsm/animation/MMDAnimationHelper';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\n\nclass Frame extends React.Component {\n  componentDidMount() {\n    const script = document.createElement('script');\n    script.src = 'js/ammo.js';\n    script.async = true;\n    script.onload = () => {\n      window.Ammo().then(lib => {\n        window.Ammo = lib;\n        this.loadThree();\n        this.animate();\n      });\n    };\n    document.body.appendChild(script);\n  }\n\n  loadThree() {\n    const width = this.mount.clientWidth;\n    const height = this.mount.clientHeight;\n    this.modelUrl = `pmx/${this.props.model}/model.pmx`;\n    this.motionUrls = this.props.motions.map(m => `vmd/${m}.vmd`);\n\n    // Camera\n    this.clock = new THREE.Clock();\n    this.camera = new THREE.PerspectiveCamera(45, width/height, 1, 2000);\n    this.camera.position.z = 30;\n\n    // Scene\n    this.scene = new THREE.Scene();\n    this.scene.background = new THREE.Color(0xffffff);\n\n    this.gridHelper = new THREE.PolarGridHelper(30, 10);\n    this.gridHelper.position.y = -10;\n    this.scene.add(this.gridHelper);\n\n    this.ambient = new THREE.AmbientLight(0x666666);\n    this.scene.add(this.ambient);\n\n    this.directionalLight = new THREE.DirectionalLight(0x887766);\n    this.directionalLight.position.set(-1, 1, 1).normalize();\n    this.scene.add(this.directionalLight);\n\n    // Renderer\n    this.renderer = new THREE.WebGLRenderer({antialias: true});\n    this.renderer.setClearColor('#000000');\n    this.renderer.setSize(width, height);\n    this.mount.appendChild(this.renderer.domElement);\n    this.controls = new OrbitControls(this.camera, this.renderer.domElement);\n\n    // Model\n    this.helper = new MMDAnimationHelper({afterglow: 2.0});\n    this.loader = new MMDLoader();\n    this.loader.loadWithAnimation(this.modelUrl, this.motionUrls, model => {\n      this.mesh = model.mesh;\n      this.mesh.position.x = this.props.modelX || 0;\n      this.mesh.position.y = this.props.modelY || -10;\n      this.mesh.position.z = this.props.modelZ || 0;\n      this.scene.add(this.mesh);\n      this.helper.add(this.mesh, {animation: model.animation, physics: true});\n\n      this.ikHelper = this.helper.objects.get(this.mesh).ikSolver.createHelper();\n      this.ikHelper.visible = false;\n      this.scene.add(this.ikHelper);\n\n      this.physicsHelper = this.helper.objects.get(this.mesh).physics.createHelper();\n      this.physicsHelper.visible = false;\n      this.scene.add(this.physicsHelper);\n\n      this.start();\n    }, () => null, null);\n  }\n\n  componentWillUnmount() {\n    this.stop();\n    this.mount.removeChild(this.renderer.domElement);\n  }\n\n  start() {\n    if (!this.frameId) {\n      this.frameId = requestAnimationFrame(this.animate);\n    }\n  }\n\n  stop() {\n    cancelAnimationFrame(this.frameId);\n  }\n\n  animate = () => {\n    this.renderScene();\n    this.frameId = window.requestAnimationFrame(this.animate);\n  }\n\n  renderScene() {\n    this.helper.update(this.clock.getDelta());\n    this.renderer.render(this.scene, this.camera);\n  }\n\n  render() {\n    return(<div\n      style={{width: '800px', height: '600px', padding: '0', margin: 'auto'}}\n      ref={mount => {this.mount = mount;}}\n    />);\n  }\n}\n\nexport default Frame;\n","import React from 'react';\nimport Frame from './Frame';\n\nclass App extends React.Component {\n  render() {\n    if (this.props.model === 'liliya') return <Frame\n      model={'liliya'}\n      motions={['wavefile']}\n    />;\n    if (this.props.model === 'seele') return <Frame\n      model={'seele'}\n      motions={['senbonzakura']}\n    />;\n    return <Frame\n      model={'wendy'}\n      motions={['sweetmagic-lip', 'sweetmagic-left']}\n      modelX={10}\n    />;\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nimport './index.css';\nimport './yorha.css';\n\nconst params = new URLSearchParams(window.location.search);\nReactDOM.render(<App model={params.get('model')}/>, document.getElementById('root'));\n"],"sourceRoot":""}