(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,n){e.exports=n(20)},18:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var i=n(1),a=n.n(i),r=n(8),o=n.n(r),s=n(2),l=n(3),c=n(5),m=n(4),h=n(6),d=n(0),p=n(10),u=n(11),w=n(9),f=0,y=1,v=2,b=3,k=function(e){function t(){var e,n;Object(s.a)(this,t);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(a)))).animate=function(){n.renderScene(),n.frameId=window.requestAnimationFrame(n.animate)},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=document.createElement("script");t.src="js/ammo.js",t.async=!0,t.onload=function(){window.Ammo().then(function(t){window.Ammo=t,e.loadThree(),e.animate()})},document.body.appendChild(t)}},{key:"convertMaterials",value:function(e,t){for(var n=[],i=0;i<e.length;i++){var a=null;switch(t){case f:a=new d.H;break;case y:a=new d.G;break;case v:a=new d.F;break;default:a=new d.E}a.copy(e[i]),a.needsUpdate=!0,n.push(a)}return n}},{key:"loadThree",value:function(){var e=this,t=this.mount.clientWidth,n=this.mount.clientHeight;this.modelUrl="pmx/".concat(this.props.model,"/model.pmx"),this.motionUrls=this.props.motions.map(function(e){return"vmd/".concat(e,".vmd")}),this.clock=new d.i,this.camera=new d.N(45,t/n,1,2e3),this.camera.position.z=30,this.scene=new d.S,this.scene.background=new d.j(13749687),this.gridHelper=new d.O(30,10),this.gridHelper.position.y=-10,this.scene.add(this.gridHelper),this.ambient=new d.b(6710886),this.scene.add(this.ambient),this.directionalLight=new d.n(8943462),this.directionalLight.position.set(-1,1,1).normalize(),this.scene.add(this.directionalLight),this.renderer=new d.fb({antialias:!0}),this.renderer.setClearColor("#000000"),this.renderer.setSize(t,n),this.mount.appendChild(this.renderer.domElement),this.controls=new w.a(this.camera,this.renderer.domElement),this.helper=new u.a({afterglow:2}),this.loader=new p.a,this.loader.loadWithAnimation(this.modelUrl,this.motionUrls,function(t){e.mesh=t.mesh,e.mesh.position.x=e.props.modelX||0,e.mesh.position.y=e.props.modelY||-10,e.mesh.position.z=e.props.modelZ||0,e.mesh.material=e.convertMaterials(e.mesh.material,b),e.scene.add(e.mesh),e.helper.add(e.mesh,{animation:t.animation,physics:!0}),e.ikHelper=e.helper.objects.get(e.mesh).ikSolver.createHelper(),e.ikHelper.visible=!1,e.scene.add(e.ikHelper),e.physicsHelper=e.helper.objects.get(e.mesh).physics.createHelper(),e.physicsHelper.visible=!1,e.scene.add(e.physicsHelper),e.start()},function(){return null},null)}},{key:"componentWillUnmount",value:function(){this.stop(),this.mount.removeChild(this.renderer.domElement)}},{key:"start",value:function(){this.frameId||(this.frameId=requestAnimationFrame(this.animate))}},{key:"stop",value:function(){cancelAnimationFrame(this.frameId)}},{key:"renderScene",value:function(){this.helper.update(this.clock.getDelta()),this.renderer.render(this.scene,this.camera)}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{style:{width:"800px",height:"600px",padding:"0",margin:"auto"},ref:function(t){e.mount=t}})}}]),t}(a.a.Component),g=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return"liliya"===this.props.model?a.a.createElement(k,{model:"liliya",motions:["wavefile"]}):"rozaliya"===this.props.model?a.a.createElement(k,{model:"rozaliya",motions:["wavefile"]}):"seele"===this.props.model?a.a.createElement(k,{model:"seele",motions:["senbonzakura"]}):a.a.createElement(k,{model:"wendy",motions:["sweetmagic-lip","sweetmagic-left"],modelX:10})}}]),t}(a.a.Component),j=(n(18),n(19),new URLSearchParams(window.location.search));o.a.render(a.a.createElement(g,{model:j.get("model")}),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.d90e937f.chunk.js.map